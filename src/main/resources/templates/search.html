<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <title>게시판</title>
  <meta http-equiv="content-type" content="text/html" charset="UTF-8">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
</head>
<body>
  <h2>검색 결과</h2>

  <div class="result-cards" th:each="p : ${posts}">
    <p th:text="${p.author()}"}></p>
    <p th:text="${p.modifiedDate()}" style="opacity: 0.6"></p>
    <h4>
      <a th:href="${'/posts/find/' + p.id()}" th:text="${p.title()}"></a>
    </h4>
    <span th:text="${p.content()}"></span>
    <hr>
  </div>

  <div th:if="${posts.totalPages > 1}" style="display: flex; justify-content: center">
    <nav aria-label="Page navigation">
      <ul class="pagination">
        <li class="page-item" th:classappend="${posts.first ? 'disabled' : ''}">
          <a class="page-link" th:href="@{/search(query=${keyword}, page=${posts.number - 1}, size=${posts.size})}">
            <span> < </span>
            <span>이전</span>
          </a>
        </li>
        <li th:each="pageNumber : ${#numbers.sequence((posts.number / 10) * 10, (posts.number / 10 == posts.totalPages / 10 ? posts.totalPages - 1 : ((posts.number / 10) * 10) + 9))}" th:classappend="${posts.number == pageNumber ? 'active' : ''}">
          <a class="page-link" th:href="@{/search(query=${keyword}, page=${pageNumber}, size=${posts.size})}" th:text="${pageNumber + 1}"></a>
        </li>
        <li class="page-item" th:classappend="${posts.last ? 'disabled' : ''}">
          <a class="page-link" th:href="@{/search(query=${keyword}, page=${posts.number + 1}, size=${posts.size})}">
            <span>다음</span>
            <span> > </span>
          </a>
        </li>
      </ul>
    </nav>
  </div>
</body>
</html>